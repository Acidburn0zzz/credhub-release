#!/bin/bash

set -eux

function extract() {
  echo "Extracting archive..."

  mkdir mariadb
  tar zxvf mariadb_10.1.23/server-mariadb-10.1.23.tar.gz -C mariadb
}

function compile() {
  echo "Compiling..."

  pushd mariadb > /dev/null
    cmake
    chmod +x storage/tokudb/PerconaFT/xz/src/build_lzma/build-aux/install-sh
    make
  popd
}

function main() {
  extract
  compile
}

main
